{% extends 'base.html' %}
{% load static %}

{% block title %}Contact Us - DoctorConnect - Professional Websites for Doctors{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/contact.css' %}">
{% endblock %}

{% block content %}
  <!-- Hero Section -->
  <section class="page-hero">
    <div class="container">
      <div class="hero-content">
        <h1>Get In Touch</h1>
        <p>Ready to transform your medical practice? Let's discuss your digital needs</p>
      </div>
    </div>
  </section>

  <!-- Contact Info Section -->
  <section class="contact-info">
    <div class="container">
      <div class="contact-grid">
        <div class="contact-card">
          <div class="contact-icon">
            <i class="fas fa-phone"></i>
          </div>
          <h3>Call Us</h3>
          <p>Speak directly with our healthcare specialists</p>
          <a href="tel:+15551234567" class="contact-link">+1 (555) 123-4567</a>
          <span class="contact-hours">Mon-Fri: 9AM-6PM EST</span>
        </div>
        
        <div class="contact-card">
          <div class="contact-icon">
            <i class="fas fa-envelope"></i>
          </div>
          <h3>Email Us</h3>
          <p>Send us a detailed message about your needs</p>
          <a href="mailto:hello@doctorconnect.com" class="contact-link">hello@doctorconnect.com</a>
          <span class="contact-hours">Response within 2 hours</span>
        </div>
        
        <div class="contact-card">
          <div class="contact-icon">
            <i class="fas fa-calendar-check"></i>
          </div>
          <h3>Schedule Consultation</h3>
          <p>Book a free 30-minute strategy session</p>
          <a href="#consultation" class="contact-link">Book Free Call</a>
          <span class="contact-hours">No obligation, no pressure</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact Form Section -->
  <section id="consultation" class="contact-form">
    <div class="container">
      <div class="form-wrapper">
        <div class="form-header">
          <h2>Request Your Free Consultation</h2>
          <p>Tell us about your practice and we'll create a customized digital strategy</p>
        </div>
        
        <form class="contact-form" id="contact-form" action="{% url 'contact_api' %}" method="POST">
          {% csrf_token %}
          <div class="form-row">
            <div class="form-group">
              <label for="first_name">First Name *</label>
              <input type="text" id="first_name" name="first_name" required>
            </div>
            <div class="form-group">
              <label for="last_name">Last Name *</label>
              <input type="text" id="last_name" name="last_name" required>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="email">Email Address *</label>
              <input type="email" id="email" name="email" required>
            </div>
            <div class="form-group">
              <label for="phone">Phone Number</label>
              <input type="tel" id="phone" name="phone">
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="practice_name">Practice Name *</label>
              <input type="text" id="practice_name" name="practice_name" required>
            </div>
            <div class="form-group">
              <label for="specialty">Medical Specialty *</label>
              <select id="specialty" name="specialty" required>
                <option value="">Select Specialty</option>
                <option value="family-medicine">Family Medicine</option>
                <option value="cardiology">Cardiology</option>
                <option value="dermatology">Dermatology</option>
                <option value="orthopedics">Orthopedics</option>
                <option value="pediatrics">Pediatrics</option>
                <option value="dental">Dental</option>
                <option value="ophthalmology">Ophthalmology</option>
                <option value="neurology">Neurology</option>
                <option value="psychiatry">Psychiatry</option>
                <option value="surgery">Surgery</option>
                <option value="other">Other</option>
              </select>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="location">Practice Location (City, State) *</label>
              <input type="text" id="location" name="location" required>
            </div>
            <div class="form-group">
              <label for="current_website">Current Website</label>
              <input type="url" id="current_website" name="current_website" placeholder="https://example.com">
            </div>
          </div>
          
          <div class="form-group full-width">
            <label for="services_needed">Services You're Interested In *</label>
            <div class="checkbox-group">
              <label class="checkbox-item">
                <input type="checkbox" name="services_checkboxes" value="website-design">
                <span class="checkmark"></span>
                Professional Website Design
              </label>
              <label class="checkbox-item">
                <input type="checkbox" name="services_checkboxes" value="seo-optimization">
                <span class="checkmark"></span>
                SEO Optimization
              </label>
              <label class="checkbox-item">
                <input type="checkbox" name="services_checkboxes" value="appointment-system">
                <span class="checkmark"></span>
                Appointment Booking System
              </label>
              <label class="checkbox-item">
                <input type="checkbox" name="services_checkboxes" value="digital-marketing">
                <span class="checkmark"></span>
                Digital Marketing
              </label>
              <label class="checkbox-item">
                <input type="checkbox" name="services_checkboxes" value="google-business">
                <span class="checkmark"></span>
                Google Business Profile
              </label>
              <label class="checkbox-item">
                <input type="checkbox" name="services_checkboxes" value="social-media">
                <span class="checkmark"></span>
                Social Media Management
              </label>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="budget_range">Monthly Budget Range</label>
              <select id="budget_range" name="budget_range">
                <option value="">Select Budget Range</option>
                <option value="under-500">Under $500</option>
                <option value="500-1000">$500 - $1,000</option>
                <option value="1000-2000">$1,000 - $2,000</option>
                <option value="2000-5000">$2,000 - $5,000</option>
                <option value="over-5000">Over $5,000</option>
              </select>
            </div>
            <div class="form-group">
              <label for="timeline">When do you want to get started?</label>
              <select id="timeline" name="timeline">
                <option value="">Select Timeline</option>
                <option value="immediately">Immediately</option>
                <option value="1-month">Within 1 month</option>
                <option value="3-months">Within 3 months</option>
                <option value="6-months">Within 6 months</option>
                <option value="planning">Just planning/exploring</option>
              </select>
            </div>
          </div>
          
          <div class="form-group full-width">
            <label for="message">Tell us about your practice and goals *</label>
            <textarea id="message" name="message" rows="5" placeholder="Describe your practice, current challenges, and what you hope to achieve online..." required></textarea>
          </div>
          
          <div class="form-group full-width">
            <label class="checkbox-item">
              <input type="checkbox" name="newsletter_subscription" value="true">
              <span class="checkmark"></span>
              I'd like to receive updates about healthcare digital marketing trends and tips
            </label>
          </div>
          
          <div class="form-actions">
            <button type="submit" class="btn btn-primary btn-large" id="submit-btn">
              <i class="fas fa-paper-plane"></i>
              Send Message
            </button>
          </div>
          
          <!-- Success/Error Messages -->
          <div id="form-messages" class="form-messages"></div>
        </form>
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section class="faq">
    <div class="container">
      <div class="section-header">
        <h2>Frequently Asked Questions</h2>
        <p>Common questions from medical professionals</p>
      </div>
      
      <div class="faq-grid">
        <div class="faq-item">
          <div class="faq-question">
            <h3>How long does it take to build a website?</h3>
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="faq-answer">
            <p>Most websites are completed within 2-4 weeks from start to finish. We can expedite to 48 hours for urgent needs.</p>
          </div>
        </div>
        
        <div class="faq-item">
          <div class="faq-question">
            <h3>Do you offer ongoing support?</h3>
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="faq-answer">
            <p>Yes! We provide 24/7 technical support, regular updates, and ongoing optimization to ensure your website continues to perform.</p>
          </div>
        </div>
        
        <div class="faq-item">
          <div class="faq-question">
            <h3>Are your solutions HIPAA compliant?</h3>
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="faq-answer">
            <p>Absolutely. All our healthcare solutions meet or exceed HIPAA requirements. We prioritize patient privacy and data security.</p>
          </div>
        </div>
        
        <div class="faq-item">
          <div class="faq-question">
            <h3>What if I'm not satisfied with the results?</h3>
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="faq-answer">
            <p>We offer a 30-day money-back guarantee. If you're not completely satisfied, we'll refund your investment, no questions asked.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Office Location Section -->
  <section class="office-location">
    <div class="container">
      <div class="location-content">
        <div class="location-info">
          <h2>Visit Our Office</h2>
          <p>Schedule an in-person meeting to discuss your digital strategy</p>
          <div class="location-details">
            <div class="detail-item">
              <i class="fas fa-map-marker-alt"></i>
              <div>
                <h4>Address</h4>
                <p>123 Healthcare Avenue<br>Medical District<br>Healthcare City, HC 12345</p>
              </div>
            </div>
            <div class="detail-item">
              <i class="fas fa-clock"></i>
              <div>
                <h4>Business Hours</h4>
                <p>Monday - Friday: 9:00 AM - 6:00 PM EST<br>Saturday: 10:00 AM - 2:00 PM EST</p>
              </div>
            </div>
            <div class="detail-item">
              <i class="fas fa-parking"></i>
              <div>
                <h4>Parking</h4>
                <p>Free parking available in our building<br>Accessible entrance on main level</p>
              </div>
            </div>
          </div>
        </div>
        
        <div class="location-map">
          <div class="map-placeholder">
            <i class="fas fa-map"></i>
            <p>Interactive Map Coming Soon</p>
            <span>123 Healthcare Avenue, Healthcare City, HC 12345</span>
          </div>
        </div>
      </div>
    </div>
  </section>
{% endblock %}

{% block extra_js %}
        <script>
          // FAQ Toggle Functionality
          document.querySelectorAll('.faq-question').forEach(question => {
            question.addEventListener('click', () => {
              const faqItem = question.parentElement;
              const answer = faqItem.querySelector('.faq-answer');
              const icon = question.querySelector('i');
              
              faqItem.classList.toggle('active');
              
              if (faqItem.classList.contains('active')) {
                answer.style.maxHeight = answer.scrollHeight + 'px';
                icon.style.transform = 'rotate(180deg)';
              } else {
                answer.style.maxHeight = '0';
                icon.style.transform = 'rotate(0deg)';
              }
            });
          });

          // Contact Form Submission
          document.getElementById('contact-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const form = this;
            const submitBtn = document.getElementById('submit-btn');
            const messagesDiv = document.getElementById('form-messages');
            const originalBtnText = submitBtn.innerHTML;
            
            // Show loading state
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';
            
            // Clear previous messages
            messagesDiv.innerHTML = '';
            
            // Get form data
            const formData = new FormData(form);
            
            // Submit form via AJAX
            fetch(form.action, {
              method: 'POST',
              body: formData,
              headers: {
                'X-Requested-With': 'XMLHttpRequest',
              }
            })
            .then(response => response.json())
            .then(data => {
              if (data.success) {
                // Show success message
                messagesDiv.innerHTML = `
                  <div class="alert alert-success">
                    <i class="fas fa-check-circle"></i>
                    ${data.message}
                  </div>
                `;
                
                // Reset form
                form.reset();
                
                // Scroll to message
                messagesDiv.scrollIntoView({ behavior: 'smooth' });
                
                // Hide message after 5 seconds
                setTimeout(() => {
                  messagesDiv.innerHTML = '';
                }, 5000);
                
              } else {
                // Show error message
                messagesDiv.innerHTML = `
                  <div class="alert alert-error">
                    <i class="fas fa-exclamation-circle"></i>
                    ${data.message}
                  </div>
                `;
                
                // Show field errors if any
                if (data.errors) {
                  Object.keys(data.errors).forEach(fieldName => {
                    const field = form.querySelector(`[name="${fieldName}"]`);
                    if (field) {
                      field.classList.add('error');
                      const errorDiv = document.createElement('div');
                      errorDiv.className = 'field-error';
                      errorDiv.textContent = data.errors[fieldName][0];
                      field.parentNode.appendChild(errorDiv);
                    }
                  });
                }
                
                // Scroll to message
                messagesDiv.scrollIntoView({ behavior: 'smooth' });
              }
            })
            .catch(error => {
              console.error('Error:', error);
              messagesDiv.innerHTML = `
                <div class="alert alert-error">
                  <i class="fas fa-exclamation-circle"></i>
                  An error occurred. Please try again or contact us directly.
                </div>
              `;
            })
            .finally(() => {
              // Restore button state
              submitBtn.disabled = false;
              submitBtn.innerHTML = originalBtnText;
            });
          });

          // Remove error styling when user starts typing
          document.querySelectorAll('#contact-form input, #contact-form select, #contact-form textarea').forEach(field => {
            field.addEventListener('input', function() {
              this.classList.remove('error');
              const errorDiv = this.parentNode.querySelector('.field-error');
              if (errorDiv) {
                errorDiv.remove();
              }
            });
          });
        </script>
{% endblock %}
